<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>What Is Hops with Grasshopper</title>
  <meta name="description" content="This guide will help explain what Hops is all about and why you might want to use it.  Using Grasshopper">

  <!-- OpenGraph for Facebook, Twitter, Slack unfurling -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/guides/compute/what-is-hops/" />
  <meta property="og:title" content="What Is Hops" />
  <meta property="og:description" content="This guide will help explain what Hops is all about and why you might want to use it." />
  <meta property=”og:site_name” content="developer.rhino3d.com"/>
  <meta property=”og:image” content="http://developer.rhino3d.com/images/rhinodev-logo-unfurl.png"/>

  <!-- twitter card tags additive with the og: tags -->
  <meta name="twitter:domain" value="developer.rhino3d.com" />
  <meta name="twitter:title" value="What Is Hops" />
  <meta name="twitter:description" value="This guide will help explain what Hops is all about and why you might want to use it." />
  
    <meta name="twitter:image" content="http://developer.rhino3d.com/images/rhinodev-logo-unfurl.png" />
  
  <meta name="twitter:url" value="http://developer.rhino3d.com" />
  
  <meta name="twitter:label1" value="Platform(s)" />
  <meta name="twitter:data1" value="Windows, Mac" />
  
  
  <meta name="twitter:label2" value="Language(s)" />
  <meta name="twitter:data2" value="Grasshopper" />
  

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/vbnet.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  <script src="/node_modules/highlightjs-line-numbers.js/dist/highlightjs-line-numbers.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script>hljs.initLineNumbersOnLoad();</script>

  <!-- Overridden theme -->
  <link rel="stylesheet" href="/css/main.css">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Optional theme -->
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
  <!-- Bootstrap override -->
  <link rel="stylesheet" href="/css/bootstrap-override.css">

  <link rel="canonical" href="http://developer.rhino3d.com/guides/compute/what-is-hops/">
  <link rel="alternate" type="application/rss+xml" title="Rhino Developer Docs" href="http://developer.rhino3d.com/feed.xml" />

  <link rel="shortcut icon" href="https://developer.rhino3d.com/favicon.ico?v=2" />
  <!-- Saving bookmarks to mobile devices -->
  <!-- For non-Retina (@1× display) iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png"><!-- 57×57px -->
  <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
  <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/images/apple-touch-icon-76x76-precomposed.png">
  <!-- For iPhone with @2× display running iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
  <!-- For iPhone with @2× display running iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/images/apple-touch-icon-120x120-precomposed.png">
  <!-- For iPad with @2× display running iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">
  <!-- For iPad with @2× display running iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/images/apple-touch-icon-152x152-precomposed.png">
  <!-- For iPhone 6 Plus with @3× display: -->
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="/images/apple-touch-icon-180x180-precomposed.png">
  <!-- For Chrome for Android: -->
  <link rel="icon" sizes="192x192" href="/images/touch-icon-192x192.png">

  <!-- Enable crawling because this version is the stable version -->
  <!--<meta name="robots" content="noindex" />-->
</head>


  <body>

    <!-- Google Tag Manager **This belongs right after the <body> tag**-->
    <noscript>
        <iframe src="//www.googletagmanager.com/ns.html?id=GTM-MWMDKN"
        height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MWMDKN');
    </script>
    <!-- End Google Tag Manager -->


    

<!-- The following are "casts" from the string to number using math filters... -->



<!-- ...but we need to check to see if the original branches were numbers or not... -->









  <div class="version-banner">

    
      
        
        
          <!-- <strong>NEW:</strong> Welcome to the <strong>Rhino 7</strong> version of this page! <a href="/6/guides/compute/what-is-hops/">Looking for the older Rhino 6 version?</a> -->
          Welcome to the <strong>Rhino 7</strong> version of this page!
          <a href="/wip/guides/compute/what-is-hops/">Looking for the newer Rhino 8 WIP version?</a>
        
        
      
    
</div>

<!-- Check the version banner for broken links and remove the link if found -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<!-- <script>
$(document).ready(function()
{
  var splitPath = window.location.pathname.split("/");
  var linkURL = "/" + splitPath.splice(2,splitPath.length-2).join("/");

  $.get(linkURL).fail(function ()
  {
    var $aTag = $("div.version-banner > a");
    $aTag.text("View the current site instead.");
    $aTag.attr("href", "/");
  });
});
</script> -->


    <div class="container">

      <header class="site-header">


    <a class="site-title" href="/"><img src="/images/rhinodevlogo148x128.png" alt="Rhino Developer Docs" height="48" width="56"></a><a class="site-title" href="/">Rhino Developer Docs</a>

    <nav class="site-nav">
      <img class="menu-icon" src="/images/gi.svg">
      
      <div class="trigger">
      	<!--<a class="page-link" href="/">Welcome</a>-->
        <!-- get current page title and "collection" to figure out which nav
             link should be "active" -->
        
        
        
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
            
              
                
              
            
          
        
          
        
          
            
              
            
          
        
          
            
              
                
                  
                    <a class="page-link active" href="/guides/">Guides</a>
                    
                  
              
            
          
        
          
            
              
                
                  
                    <a class="page-link" href="/api/">API</a>
                    
                  
              
            
          
        
          
            
              
                
                  
                    <a class="page-link" href="/samples/">Samples</a>
                    
                  
              
            
          
        
          
            
          
        
          
            
              
                
                  
                    <a class="page-link" href="/videos/">Videos</a>
                    
                  
              
            
          
        
        <a class="page-link" href="https://discourse.mcneel.com/c/rhino-developer">Forums</a>
        <!-- Google Search Engine -->
        <!-- TODO Move to this site back into the Mcneel search, or use a simple site only search for results -->
        <div id="sitesearch">
            <!-- CSE Search Box Begins  -->
            <form id="search-box" name="search-box" onsubmit="sitesearchFunction()" action="/search-results.html">
                <input id="searchtext" type="search" name="q" size="24" value="" placeholder="Search" />
                <input class="searchBox" type="submit" size="2" value=" " />
            </form>
			<script type="text/javascript">
			function sitesearchFunction(){
				var form_id = document.getElementById("search-box");
				var form_action = form_id.action;
                var form_sb = document.getElementById("searchtext");
				var query_src = form_sb.value + " site:developer.rhino3d.com";
				form_sb.value = query_src.toString();
			}
			</script>
<!-- Google CSE Search Box Ends -->
        </div>
        <!--End of Google Search Engine -->
      </div>
    </nav>

</header>


      <div class="page-content">
        <!--div class="wrapper"-->
          <div class="container-fluid">

<div class="row-fluid">
    <!--Nav Bar -->
    <nav class="col-xs-0 col-md-3 bs-docs-sidebar">
    <ul id="sidebar" class="nav nav-stacked fixed">
        <!-- Find the h2 group and any h3 subgroups -->
        

        
          

          
            
            
            
            
            <li>
              <a href="#what-is-hops">What is Hops?</a>

              
                <ul class="nav nav-stacked">
                  

                  
                    
                    
                    
                    
                    
                    <li>
                        <a href="#calling-functions-in-grasshopper">Calling Functions in Gras...</a>
                    </li>
                  

                </ul>
              

            </li>
          

        
          

          
            
            
            
            
            <li>
              <a href="#how-does-it-work">How does it work?</a>

              
                <ul class="nav nav-stacked">
                  

                  
                    
                    
                    
                    
                    
                    <li>
                        <a href="#what-is-a-client">What is a Client?</a>
                    </li>
                  
                    
                    
                    
                    
                    
                    <li>
                        <a href="#what-is-a-server">What is a Server?</a>
                    </li>
                  
                    
                    
                    
                    
                    
                    <li>
                        <a href="#putting-it-all-together">Putting it all together</a>
                    </li>
                  

                </ul>
              

            </li>
          

        
    </ul>
</nav>


    <!--Main Content -->
    <div class="col-xs-12 col-md-9">
      <!--<div class="post">-->

        <article class="post-content">

          <ol class="breadcrumb">
              
              
              
              
              <li><a href="/guides/"></a></li>

              
                
              
          </ol>

          <h1>What Is Hops</h1>

          <p>
  <span class="guide_byline">
    
      
      by <a href="/authors/andy_payne">Andy Payne</a> (Last modified: <a href="https://github.com/mcneel/developer-rhino3d-com/commits/7/_guide_topics/compute/what-is-hops.md" target="_blank">16 Feb 2022</a>)
    
  </span>

</p>

          <p>This guide will help explain what Hops is all about and why you might want to use it.</p>

          <h2 id="what-is-hops">What is Hops?</h2>

<p>Have you ever stared at a large complex Grasshopper definition and marveled at the inscrutability of it all? Visual programming is notorious for its ability to quickly become an illegible, tangled, mess of code. In fact, this state of disogranization is often referred to as <a href="http://wiki.c2.com/?SpaghettiCode">Spaghetti Code</a> or sometimes a <a href="https://joeyoder.com/PDFs/mud.pdf">Big Ball of Mud</a> for obvious reasons. There are a number of factors which often contribute to the creation of spaghetti code including time constraints, the skill level of the programmer, or even project complexity - but after trying to decipher a big ball of Grasshopper spaghetti, there is but one universal truth:</p>

<blockquote>
  <h3 style="color:black; line-height: 1.3; margin-top: -5px;">Spaghetti code can make the task of understanding what the code actually does impractical or even impossible.</h3>
</blockquote>

<h3 id="calling-functions-in-grasshopper">Calling Functions in Grasshopper</h3>

<p>So how do we begin to untangle this problem that has become so commonplace among Grasshopper developers? We begin by breaking down our spaghetti code into smaller reusable <strong>functions</strong>. In programming, a function is a “self-contained” module of code that usually takes in data, processes it, and returns a result. That sounds a lot like a Grasshopper definition. For example, Grasshopper definitions typically have inputs parameters like sliders, boolean toggles, or text which are fed through the graph to perform a series of actions, ultimately producing a result at the end. So, the key is to learn how to analyze a problem and break it down into smaller sub-definitions which we will use as functions.</p>

<p>Say, for instance, that you needed to run a shadow analysis for a parametric tower you were designing for New York City. This problem could be broken down into four smaller tasks:</p>
<ol>
  <li>Create the building lot outline</li>
  <li>Create the building envelope</li>
  <li>Create the floor plates</li>
  <li>Run the shadow analysis from the building enevlope and surrounding buildings</li>
</ol>

<p>Once the tasks have been clearly defined, you can determine what information will be needed to perform each task (i.e., the inputs) and what data will be returned at the end (i.e., the outputs). So, for step 1, the inputs needed to generate the building lot outline would include site setbacks and other regulatory parameters from the building and zoning codes. The output for this function would likely include a polyline outlining the maximum building area at the ground floor.</p>

<p>To define the parameters which will be used in a Grasshopper function, we should use the <strong>Context Get</strong> components for the inputs and the <strong>Context Bake</strong> component for all outputs. Each of these can be found under the <em>Params Tab &gt; Util Group</em>.</p>

<p><img src="/images/hops_context_getters.png" class="img-center" width="92%" /></p>

<p>Now that we have the inputs and outputs defined, all that is left is to fill in the steps to turn those inputs into outputs. Here is the interesting part. After a function has been fully defined as a Grasshopper definition - meaning it contains some inputs and outputs and performs a number of actions in between - we can simplify our project by calling that function through Hops. Hops takes that larger definition and bundles it into a single component, only exposing the inputs and outputs you defined inside your function. Unlike clusters, Hops lets you reference external files which can be saved locally or on a network drive - making it easy to share definitions among other team members and collaborators.</p>

<p><img src="/images/hops_ref_defintion.png" class="img-center" width="100%" /></p>

<p>In summary, Hops enables you to dramatically increase the legibility of your code by simplifying complex definitions. In addition, it lets you share an reuse functions while eliminating duplicate component combinations which can be placed into a function. Hops also lets you solve functions in parallel, potentially speeding up large projects. And lastly, Hops lets you solve functions asynchronously without blocking Rhino and Grasshopper interactions.</p>

<h2 id="how-does-it-work">How does it work?</h2>

<p>In its most basic form, Hops is simply a client application for a Rhino.Compute server. I know, I’ve already lost you. But bear with me. Let’s break that statement down a bit.</p>

<h3 id="what-is-a-client">What is a Client?</h3>

<p>A client is simply a hardware device (i.e., computer) or software application which makes a request for a digital resource from a server over a network connection. The client is designed for end-users to access resources such as files, videos, data or other computing resources.</p>

<p>For Hops, the client interface is simply the Hops component that you can find under the <em>Params Tab &gt; Util Group</em> after you install Hops through the package manager. When you right-click on the Hops component and set the path to a Grasshopper file on your local machine, you are telling Hops to bundle up the data in that file and send a request to a Rhino.Compute server to solve that definition and return the results.
<img src="/images/hops_hello_world3.png" class="img-center" width="85%" /></p>

<h3 id="what-is-a-server">What is a Server?</h3>

<p>A server’s sole purpose is to do what its name implies - serve its clients. It is usually a software application whose job is to receive and process incoming requests from a client and send an appropriate response. A server can be used to provide computing-intensive services to the client on demand and can be run on the same computer as the local client or on remote computer connected via a network.</p>

<p>In the context of Hops, the server is an application which can process an incoming request and pass the relevant information to a headless version of Rhino. Headless simply means that there is no graphical interface that you can interact with (ie. viewports, toolbars, etc.). It’s simply a bare-bones version of Rhino which can run commands or solve Grasshopper definitions. The headless version of Rhino solves the Grasshopper definition and then returns the result in the form of a http response.
 <img src="/images/hops_server1.png" class="img-center" width="70%" /></p>

<h3 id="putting-it-all-together">Putting it all together</h3>

<p>The communication process between Hops and Rhino.Compute is a little more nuanced than sending and receiving a single request and response. The first step in the process occurs when Hops bundles up the referenced Grasshopper definition and sends a http request to an endpoint on the server. An endpoint is simply a URL address where the server can be reached to perform a certain function. In this first request we need to ask the server to open the Grasshopper definition and determine what information we will need to populate the inputs and outputs for the Hops component. So, the endpoint will be called <code>/io</code> (short for Input Output).</p>

<p><img src="/images/hops_io_request.png" class="img-center" width="100%" /></p>

<p>At this point the Hops component should have enough information to create the necessary inputs and output nodes for itself. In this example, we have one input (cleverly called Input) which accepts some text value and one output (also aptly named as Output) which will return a text value.</p>

<p><img src="/images/hops_get_inputs.png" class="img-center" width="75%" /></p>

<p>When all of the Hops inputs have been connected to source parameters, it will then send a new http request to the server only this time it will it will send the request to the <code>/solve</code> endpoint. We don’t need to send the referenced Grasshopper definition again with this call, since this was already stored on the server during the <code>/io</code> process. Instead, the data sent in the <code>/solve</code> request contains a pointer ID which tells the server where to find the correct file. Additionally, the request contains the data passed into the input parameters so the server can use those values in the Grasshopper definition and return a result. This time, the http response from the server contains all data which would normally be returned from running the Grasshopper file locally.</p>

<p><img src="/images/hops_return_results.png" class="img-center" width="70%" /></p>

<p>To have a better understanding of how each step above works, you can export the last request/response for both the <code>/io</code> and <code>/solve</code> endpoints directly from the Hops component.</p>

<p><img src="/images/hops_export_requests.png" class="img-center" width="100%" /></p>

        </article>

      <!--</div>-->

    </div>
</div>
</div>

        <!--/div-->
      </div>

      <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">

      
        <div class="row">
          <div class="col-md-4">

            <p class="text">
              
                
                Author: <a href="/authors/andy_payne">Andy Payne</a>
              
            </p>
          </div>
          <div class="col-md-4 text-center">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            <a href="https://github.com/mcneel/developer-rhino3d-com/blob/7/_guide_topics/compute/what-is-hops.md" target="_blank">Edit page on GitHub</a>
          </div>
            <div class="col-md-4">
              <span class="pull-right">
                <span class="glyphicon glyphicon-cog"></span>&nbsp;<a href="/admin">Admin</a>
              </span>
            </div>
        </div>

        <div class="row text-center">
          © 1997 - 2022 Robert McNeel &amp; Associates<br/>
          <span class="glyphicon glyphicon-heart-empty"></span>&nbsp;<a href="/authors">Contributions welcome</a>
        </div>

      

    </div>

  </div>

  <script>
    if (navigator.appVersion.indexOf("Win")!=-1)
    {
      var body = document.getElementsByTagName("body");
      body[0].style.fontWeight = '400';
    }
  </script>

</footer>

    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- MathJax -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/javascript">
    $('body').scrollspy({
        target: '.bs-docs-sidebar',
        offset: 150 /* fixed header is about 40px high */
    });
    </script>
  </body>
</html>
